# Задание

Индекс работает следующим образом:

1) Добавление файлов в индекс происходит коммандой:

```
CONFIG_PATH=<config.yml> go run <main.go> -command=index -filepath=<filepath1>,<filepath2>
```

2) Поиск похожих файлов происходит коммандой:

```
CONFIG_PATH=<config.yml> go run <main.go> -command=search -filepath=<filepath1>,<filepath2>
```


# Решение

Индекс представляет собой файл `file_index`, куда мы построчно записываем:

`
<Длина пути к файлу><Путь к файлу><Длина хеша><Хеш>
`

Хеш считается по `blake3`

Записываем мы аппендом в конец файла в несколько потоков. Хоть операцию и блокирующая, но так все равно быстрее. Колво потоков задается в конфиге


**Как устроено чтение:**

1) Считаем все файлы, переданные в командной строке
2) Генерируем хеш для всех файлов
3) Итерируетмся построчно в файле `file_index` и сравниваем хеш

Хеш сравниваем по `Hamming distance`. Затем сравниваем совпадение с переданным в конфиге (`config.yml`) значением и решаем нашли кеш или не нашли. Колво потоков на чтение задается в конфиге

Все происходит быстро, тк используем каналы: Если хеш совпал - сразу отправляем в канал и на стороне читаем. Таким образом после прохода по всему файлу все совпадения будут уже готовы. Итоговые сопадения пишутся в Stdout

**Также реализовано логгирование в `json` формате. Логи пишутся в `stdout`**

# Сложность индекса

Вся сложность в чтении данных из файла индекса. Приходится пройти по всему файлу для поиска совпадений. Решил делать индекс как файл, тк в памяти приложения хранить плохо - если приложение упадет, то и весь индекс тоже